#generate extracted chlorophyll mosaic from existing chlext.tif(s)

BASEDIR=/home/jose/Documents/Science/Data/Dataflow
SURFACES=$(wildcard $(BASEDIR)/DF_Surfaces/*)
#COEF_FILE=$(BASEDIR)/DF_GrabSamples/extractChlcoef2.csv
#CSV_FILES=$(wildcard $(BASEDIR)/DF_FullDataSets/*.csv)
#LOG_FILES=$(wildcard logs/*.log)
#SURVEY_FILE=yearmonfits.csv
#GRASSTEST=$(BASEDIR)/QGIS_plotting/201311.pdf
GRASSMAPS=$(sort $(BASEDIR)/QGIS_plotting/*.pdf)
LEGEND_FILE=$(BASEDIR)/QGIS_plotting/legend/legend.pdf


.PHONY : variables
variables:
	@echo BASEDIR: $(BASEDIR)
#	@echo COEF_FILE: $(COEF_FILE)
#	@echo CSV_FILES: $(CSV_FILES)
#	@echo TIF_FILES: $(TIF_FILES)
#	@echo LOG_FILES: $(LOG_FILES)
#	@echo GRASSTEST: $(GRASSTEST)
	@echo GRASSMAPS: $(GRASSMAPS)

legend5.png: $(LEGEND_FILE)
	convert $(LEGEND_FILE) -crop 265x8+42+95 -trim -resize 2188x +repage legend.png
	convert legend.png -crop x120 legend2.png
	convert legend2.png -bordercolor black -border 5x5 -background white -extent 2188x200 +repage legend3.png
	convert legend3.png -interword-spacing 250 -pointsize 40 -fill black -draw "text 1980,175 'Chlorophyll'" legend4.png	
	convert legend4.png -interword-spacing 250 -pointsize 55 -fill black -draw "text 20,175 '0.0 0.7 1.5 3.0 6.0 10.0'" -resize 2192x legend5.png

#find grassmap plots
multipanel.png: $(GRASSMAPS) legend5.png
	montage $(GRASSMAPS) -trim -geometry +6+6 -bordercolor black -border 5x5 -tile 4x tile.png
	convert /home/jose/Documents/Science/Data/Dataflow/DF_Basefile/sfwmd_bar8half_wordorexcel.png -resize 2192x sfwmdbar.png
	montage sfwmdbar.png tile.png legend5.png -tile x3 -geometry +1+1 -bordercolor white -border 1x1 multipanel.png

.PHONY: clean
clean:
	rm -f multipanel.png
	rm -f tile.png
	rm -f legend*.png


#montage plots
#UNFINISHED DO  NOT RUN!!!
